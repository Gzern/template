{"version":3,"sources":["webpack:///src/components/Info/Info.vue","webpack:///./src/components/Info/Info.vue?da2d","webpack:///./src/components/Info/Info.vue"],"names":["Info","mixins","data","api","name","currentPage","pageSize","infoDataLength","sizesmall","size","infoData","searchForm","templateId","methods","search","this","_getList","handleEdit","index","row","console","log","handleDelete","_this","$confirm","confirmButtonText","cancelButtonText","type","center","then","r","_ref","$message","success","catch","err","error","enterAdd","$router","push","handleCurrentChange","formatterColumn","column","date","property","undefined","moment_default","format","id","startPage","_this2","res","status","templateInfoList","parseInt","totalCount","created","window","innerWidth","mounted","twHeight","$refs","tableWrapper","$el","clientHeight","tableHeight","Info_Info","render","_vm","_h","$createElement","_c","_self","staticClass","ref","attrs","model","label-width","label","prop","value","callback","$$v","$set","expression","_v","on","click","$event","resetForm","directives","rawName","Add","staticStyle","width","height","fixed","formatter","scopedSlots","_u","key","fn","scope","DeleteTemplate","$index","current-page","page-size","layout","total","small","current-change","update:currentPage","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"6IAwDAA,GACAC,SALAC,KAAA,WACA,OAAAC,UAKAC,KAAA,OACAF,KAHA,WAIA,OACAG,YAAA,EACAC,SAAA,GACAC,eAAA,GACAC,WAAA,EACAC,KAAA,SACAC,YACAC,YACAC,WAAA,MAIAC,SACAC,OADA,WAEAC,KAAAJ,WAAAC,WACAG,KAAAC,SAAAD,KAAAJ,WAAAC,WAAA,GACAG,KAAAV,YAAA,GAEAY,WANA,SAMAC,EAAAC,GACAC,QAAAC,IAAAH,EAAAC,IAEAG,aATA,SASAJ,EAAAC,GAAA,IAAAI,EAAAR,KACAA,KAAAS,SAAA,cACAC,kBAAA,KACAC,iBAAA,KACAC,KAAA,OACAC,QAAA,IACAC,KAAA,WACA1B,EAAA,eAAA2B,EAAAX,EAAAP,YAAAiB,KAAA,SAAAE,GACA,YADAA,EAAA7B,OAEAqB,EAAAS,SAAAC,QAAA,UACAV,EAAAP,SAAAO,EAAAZ,WAAAC,WAAAW,EAAAlB,gBAEA6B,MAAA,SAAAC,GACAZ,EAAAS,SAAAI,MAAA,UACAhB,QAAAC,IAAAc,OAEAD,MAAA,eAEAG,SA3BA,WA4BAtB,KAAAuB,QAAAC,KAAA,SAEAC,oBA9BA,SA8BAnC,GACAU,KAAAV,cACAU,KAAAC,SAAAD,KAAAJ,WAAAC,WAAAP,IAEAoC,gBAlCA,SAkCAtB,EAAAuB,GACA,IAAAC,EAAAxB,EAAAuB,EAAAE,UACA,YAAAC,GAAAF,EACA,GAEAG,IAAAH,GAAAI,OAAA,wBAEA/B,SAzCA,SAyCAgC,EAAAC,GAAA,IAAAC,EAAAnC,KACAZ,EAAA,KAAA2B,EAAAkB,EAAAC,EAAA,IAAApB,KAAA,SAAAsB,GACA,MAAAA,EAAAC,QACA,YAAAD,EAAAjD,KAAA+B,UACAiB,EAAAxC,SAAAyC,EAAAjD,UAAAmD,iBACAH,EAAA3C,eAAA+C,SAAAH,EAAAjD,UAAAqD,YACAL,EAAAZ,QAAAC,KAAA,qBAAAU,EAAA,WAAAD,MAGAd,MAAA,SAAAC,GACAf,QAAAC,IAAAc,OAIAqB,QAvEA,WAwEAzC,KAAAP,UAAAiD,OAAAC,WAAA,IACA3C,KAAAN,KAAAgD,OAAAC,WAAA,oBACA3C,KAAAC,SAAAD,KAAAJ,WAAAC,WAAA,IAEA+C,QA5EA,WA6EA,GAAAF,OAAAC,YAAA,KACA,IAAAE,EAAA7C,KAAA8C,MAAAC,aAAAC,IAAAC,aACAjD,KAAAkD,YAAAL,EAAA,GACAxC,QAAAC,IAAAN,KAAAkD,gBCrIAC,GADiBC,OAFjB,WAA0B,IAAAC,EAAArD,KAAasD,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,SAAmBF,EAAA,WAAgBE,YAAA,mBAA6BF,EAAA,WAAgBG,IAAA,aAAAD,YAAA,cAAAE,OAAkDC,MAAAR,EAAAzD,WAAAF,KAAA2D,EAAA3D,KAAAoE,cAAA,WAA8DN,EAAA,gBAAqBE,YAAA,mBAAAE,OAAsCG,MAAA,OAAAC,KAAA,gBAAoCR,EAAA,YAAiBK,OAAOI,MAAAZ,EAAAzD,WAAA,WAAAsE,SAAA,SAAAC,GAA2Dd,EAAAe,KAAAf,EAAAzD,WAAA,aAAAuE,IAA4CE,WAAA,4BAAqC,OAAAhB,EAAAiB,GAAA,KAAAd,EAAA,OAAgCE,YAAA,mBAA6BF,EAAA,aAAkBI,OAAOlE,KAAA2D,EAAA3D,KAAAkB,KAAA,WAAiC2D,IAAKC,MAAAnB,EAAAtD,UAAoBsD,EAAAiB,GAAA,QAAAjB,EAAAiB,GAAA,KAAAd,EAAA,aAA6CI,OAAOlE,KAAA2D,EAAA3D,MAAgB6E,IAAKC,MAAA,SAAAC,GAAyBpB,EAAAqB,UAAA,kBAA8BrB,EAAAiB,GAAA,QAAAjB,EAAAiB,GAAA,KAAAd,EAAA,aAA6CmB,aAAatF,KAAA,MAAAuF,QAAA,QAAAX,OAAAZ,EAAAjE,IAAAyF,KAAAR,WAAA,cAAwET,OAASlE,KAAA2D,EAAA3D,KAAAkB,KAAA,WAAiC2D,IAAKC,MAAAnB,EAAA/B,YAAsB+B,EAAAiB,GAAA,kBAAAjB,EAAAiB,GAAA,KAAAd,EAAA,WAAqDG,IAAA,eAAAD,YAAA,kBAA+CF,EAAA,YAAiBG,IAAA,aAAAD,YAAA,cAAAoB,aAAwDC,MAAA,QAAenB,OAAQzE,KAAAkE,EAAA1D,SAAAD,KAAA2D,EAAA3D,KAAAsF,OAAA3B,EAAAH,eAA8DM,EAAA,mBAAwBI,OAAOI,KAAA,aAAAD,MAAA,OAAAkB,MAAA,MAA+C5B,EAAAiB,GAAA,KAAAd,EAAA,mBAAoCI,OAAOI,KAAA,iBAAAD,MAAA,UAAwCV,EAAAiB,GAAA,KAAAd,EAAA,mBAAoCI,OAAOI,KAAA,eAAAD,MAAA,QAAoCV,EAAAiB,GAAA,KAAAd,EAAA,mBAAoCI,OAAOI,KAAA,gBAAAD,MAAA,UAAuCV,EAAAiB,GAAA,KAAAd,EAAA,mBAAoCI,OAAOI,KAAA,eAAAe,MAAA,MAAAhB,MAAA,QAAkDV,EAAAiB,GAAA,KAAAd,EAAA,mBAAoCI,OAAOI,KAAA,qBAAAD,MAAA,SAA2CV,EAAAiB,GAAA,KAAAd,EAAA,mBAAoCI,OAAOI,KAAA,wBAAAe,MAAA,MAAAhB,MAAA,OAAAmB,UAAA7B,EAAA3B,mBAA6F2B,EAAAiB,GAAA,KAAAd,EAAA,mBAAoCI,OAAOI,KAAA,gBAAAD,MAAA,QAAqCV,EAAAiB,GAAA,KAAAd,EAAA,mBAAoCI,OAAOI,KAAA,gBAAAe,MAAA,MAAAhB,MAAA,OAAAmB,UAAA7B,EAAA3B,mBAAqF2B,EAAAiB,GAAA,KAAAd,EAAA,mBAAoCI,OAAOmB,MAAA,MAAAhB,MAAA,KAAAkB,MAAA,SAA2CE,YAAA9B,EAAA+B,KAAsBC,IAAA,UAAAC,GAAA,SAAAC,GAAiC,OAAA/B,EAAA,aAAwBmB,aAAatF,KAAA,MAAAuF,QAAA,QAAAX,OAAAZ,EAAAjE,IAAAoG,gBAAAnB,WAAA,yBAA8FT,OAASlE,KAAA,OAAAkB,KAAA,UAA8B2D,IAAKC,MAAA,SAAAC,GAAyBpB,EAAA9C,aAAAgF,EAAAE,OAAAF,EAAAnF,SAA4CiD,EAAAiB,GAAA,kBAAwB,GAAAjB,EAAAiB,GAAA,KAAAd,EAAA,iBAAsCI,OAAO8B,eAAArC,EAAA/D,YAAAqG,YAAAtC,EAAA9D,SAAAqG,OAAA,2BAAAC,MAAAxC,EAAA7D,eAAAsG,MAAAzC,EAAA5D,WAA6I8E,IAAKwB,iBAAA1C,EAAA5B,oBAAAuE,qBAAA,SAAAvB,GAA+EpB,EAAA/D,YAAAmF,OAAyB,QAElwFwB,oBCCjB,IAcAC,EAdAC,EAAA,OAcAC,CACAnH,EACAkE,GATA,EAVA,SAAAkD,GACAF,EAAA,SAaA,kBAEA,MAUAG,EAAA,QAAAJ,EAAA","file":"static/js/12.3c4cacd220c48a4abf1c.js","sourcesContent":["<template>\n\t<div class=\"info\">\n    <el-card class=\"search-wrapper\">\n      <el-form :model=\"searchForm\" :size=\"size\" ref=\"searchForm\" class=\"search-form\" label-width=\"100px\">\n        <el-form-item class=\"search-form-item\" label=\"样板编号\" prop=\"templateId\">\n          <el-input v-model=\"searchForm.templateId\"></el-input>\n        </el-form-item>\n      </el-form>\n      <div class=\"button-wrapper\">\n        <el-button :size=\"size\" type=\"primary\" @click=\"search\">搜索</el-button>\n        <el-button :size=\"size\" @click=\"resetForm('searchForm')\">重置</el-button>\n        <el-button :size=\"size\" type=\"primary\" @click=\"enterAdd\" v-has=\"[api.Add]\">样板新增</el-button>\n      </div>\n    </el-card>\n    <el-card class=\"table-wrapper\" ref=\"tableWrapper\">\n      <el-table class=\"table-panel\" :data=\"infoData\" :size=\"size\" style=\"width: 100%;\" ref=\"tablePanel\" :height=\"tableHeight\">\n        <el-table-column prop=\"templateId\" label=\"样板编号\" fixed></el-table-column>\n        <el-table-column prop=\"templateSeries\" label=\"所属系列\"></el-table-column>\n        <el-table-column prop=\"templateNorm\" label=\"规格\"></el-table-column>\n        <el-table-column prop=\"piecesPerSuit\" label=\"每套片数\"></el-table-column>\n        <el-table-column prop=\"templateType\" width=\"100\" label=\"类型\"></el-table-column>\n        <el-table-column prop=\"templateSignaturer\" label=\"签板人\"></el-table-column>\n        <el-table-column prop=\"templateSignatureTime\" width=\"100\" label=\"签板日期\" :formatter=\"formatterColumn\"></el-table-column>\n        <el-table-column prop=\"templateColor\" label=\"色号\"></el-table-column>\n        <el-table-column prop=\"templateCtime\" width=\"100\" label=\"生产日期\" :formatter=\"formatterColumn\"></el-table-column>\n        <el-table-column width=\"100\" label=\"操作\" fixed=\"right\">\n          <template slot-scope=\"scope\">\n            <el-button\n              size=\"mini\"\n              type=\"danger\"\n              v-has=\"[api.DeleteTemplate]\"\n              @click=\"handleDelete(scope.$index, scope.row)\">样板报废</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n      <el-pagination\n        @current-change=\"handleCurrentChange\"\n        :current-page.sync=\"currentPage\"\n        :page-size=\"pageSize\"\n        layout=\"total, prev, pager, next\"\n        :total=\"infoDataLength\"\n        :small=\"sizesmall\"\n      >\n      </el-pagination>\n    </el-card>\n  </div>\n</template>\n\n<script>\n  import moment from 'moment'\n  import * as api from 'api/index'\n  let myMixin = {\n    data: function () {\n      return { api }\n    }\n  }\n  export default {\n    mixins: [myMixin],\n    name: \"info\",\n    data() {\n      return {\n        currentPage: 1,\n        pageSize: 10,\n        infoDataLength: '',\n        sizesmall: false,\n        size: 'medium',\n        infoData: [],\n        searchForm: {\n          templateId: ''\n        }\n      }\n    },\n    methods: {\n      search() {\n        let id = this.searchForm.templateId\n        this._getList(this.searchForm.templateId, 1)\n        this.currentPage = 1\n      },\n      handleEdit(index, row) {\n        console.log(index, row);\n      },\n      handleDelete(index, row) {\n        this.$confirm('确认删除？', \"提示\", {\n          confirmButtonText: \"确定\",\n          cancelButtonText: \"取消\",\n          type: 'info',\n          center: true\n        }).then(() => {\n          api.DeleteTemplate.r(row.templateId).then(({ data }) => {\n            if (data === 'SUCCESS') {\n              this.$message.success('数据删除成功')\n              this._getList(this.searchForm.templateId, this.currentPage)\n            }\n          }).catch(err => {\n            this.$message.error('数据删除失败')\n            console.log(err)\n          })\n        }).catch(() => {})\n      },\n      enterAdd() {\n        this.$router.push('/add')\n      },\n      handleCurrentChange(currentPage) {\n        this.currentPage = currentPage\n        this._getList(this.searchForm.templateId, currentPage)\n      },\n      formatterColumn(row, column) {\n        var date = row[column.property]\n        if (date == undefined) {\n          return \"\"\n        }\n        return moment(date).format(\"YYYY-MM-DD HH:mm:ss\")\n      },\n      _getList(id, startPage) {\n        api.List.r(id, startPage, 10).then((res) => {\n          if (res.status === 200) {\n            if (res.data.success === 'SUCCESS') {\n              this.infoData = res.data.data.templateInfoList\n              this.infoDataLength = parseInt(res.data.data.totalCount)\n              this.$router.push(`/info?currentPage=${startPage}&search=${id}`)\n            }\n          }\n        }).catch((err) => {\n          console.log(err)\n        })\n      }\n    },\n    created() {\n      this.sizesmall = (window.innerWidth < 767) ? true: false\n      this.size = (window.innerWidth < 767) ? 'mini' : 'medium'\n      this._getList(this.searchForm.templateId, 1)\n    },\n    mounted() {\n      if (window.innerWidth >= 767) {\n        let twHeight = this.$refs.tableWrapper.$el.clientHeight\n        this.tableHeight = twHeight - 50\n        console.log(this.tableHeight)\n      }\n    }\n  }\n</script>\n\n<style type=\"text/stylus\" lang=\"stylus\" rel=\"stylesheet/stylus\" scoped>\n  @import \"~assets/stylus/variable.styl\"\n  @import \"Info.styl\"\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Info/Info.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"info\"},[_c('el-card',{staticClass:\"search-wrapper\"},[_c('el-form',{ref:\"searchForm\",staticClass:\"search-form\",attrs:{\"model\":_vm.searchForm,\"size\":_vm.size,\"label-width\":\"100px\"}},[_c('el-form-item',{staticClass:\"search-form-item\",attrs:{\"label\":\"样板编号\",\"prop\":\"templateId\"}},[_c('el-input',{model:{value:(_vm.searchForm.templateId),callback:function ($$v) {_vm.$set(_vm.searchForm, \"templateId\", $$v)},expression:\"searchForm.templateId\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"button-wrapper\"},[_c('el-button',{attrs:{\"size\":_vm.size,\"type\":\"primary\"},on:{\"click\":_vm.search}},[_vm._v(\"搜索\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":_vm.size},on:{\"click\":function($event){_vm.resetForm('searchForm')}}},[_vm._v(\"重置\")]),_vm._v(\" \"),_c('el-button',{directives:[{name:\"has\",rawName:\"v-has\",value:([_vm.api.Add]),expression:\"[api.Add]\"}],attrs:{\"size\":_vm.size,\"type\":\"primary\"},on:{\"click\":_vm.enterAdd}},[_vm._v(\"样板新增\")])],1)],1),_vm._v(\" \"),_c('el-card',{ref:\"tableWrapper\",staticClass:\"table-wrapper\"},[_c('el-table',{ref:\"tablePanel\",staticClass:\"table-panel\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.infoData,\"size\":_vm.size,\"height\":_vm.tableHeight}},[_c('el-table-column',{attrs:{\"prop\":\"templateId\",\"label\":\"样板编号\",\"fixed\":\"\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"templateSeries\",\"label\":\"所属系列\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"templateNorm\",\"label\":\"规格\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"piecesPerSuit\",\"label\":\"每套片数\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"templateType\",\"width\":\"100\",\"label\":\"类型\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"templateSignaturer\",\"label\":\"签板人\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"templateSignatureTime\",\"width\":\"100\",\"label\":\"签板日期\",\"formatter\":_vm.formatterColumn}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"templateColor\",\"label\":\"色号\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"templateCtime\",\"width\":\"100\",\"label\":\"生产日期\",\"formatter\":_vm.formatterColumn}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"width\":\"100\",\"label\":\"操作\",\"fixed\":\"right\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{directives:[{name:\"has\",rawName:\"v-has\",value:([_vm.api.DeleteTemplate]),expression:\"[api.DeleteTemplate]\"}],attrs:{\"size\":\"mini\",\"type\":\"danger\"},on:{\"click\":function($event){_vm.handleDelete(scope.$index, scope.row)}}},[_vm._v(\"样板报废\")])]}}])})],1),_vm._v(\" \"),_c('el-pagination',{attrs:{\"current-page\":_vm.currentPage,\"page-size\":_vm.pageSize,\"layout\":\"total, prev, pager, next\",\"total\":_vm.infoDataLength,\"small\":_vm.sizesmall},on:{\"current-change\":_vm.handleCurrentChange,\"update:currentPage\":function($event){_vm.currentPage=$event}}})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0eb22993\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Info/Info.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0eb22993\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Info.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Info.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Info.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0eb22993\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Info.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-0eb22993\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Info/Info.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}