webpackJsonp([1],{EFCr:function(e,t){},mJTh:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("mvHQ"),o=s.n(n),a=s("vMJZ"),r=s("LOkV"),i={name:"",data:function(){return{username:"",password:"",isBtnLoading:!1}},computed:{btnText:function(){return this.isBtnLoading?"登录中...":"登录"}},methods:{toReg:function(){this.$router.push("/reg")},login:function(){var e=this;if(this.username.trim())if(this.password){var t={userName:this.username,userPassword:this.password};this.isBtnLoading=!0;var s=o()(t);a.a.Login(s).then(function(t){if(console.log(t),e.isBtnLoading=!1,"SUCCESS"===t.data.success){e.$message.success("登录成功"),e.username="",e.password="";var s={token:t.data.data};r.b("token",s),e.$emit("login",e.$router.currentRoute.query.from)}else e.$message.error("登录失败，用户名或密码错误")}).catch(function(t){e.$message.error("登录失败，服务器异常"),console.log(t)})}else this.$message.error("请填写密码");else this.$message.error("请填写用户名")}},created:function(){sessionStorage.clear()}},l={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login",on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.login(t):null}}},[s("el-form",{staticClass:"login-form"},[s("h1",{staticClass:"title"},[e._v("样板管理系统")]),e._v(" "),s("el-form-item",[s("el-input",{attrs:{autofocus:!0,placeholder:"请输入账号"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}},[s("template",{slot:"prepend"},[s("i",{staticClass:"el-icon-mobile-phone"})])],2)],1),e._v(" "),s("el-form-item",[s("el-input",{attrs:{placeholder:"请输入密码",type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}},[s("template",{slot:"prepend"},[s("i",{staticClass:"el-icon-info"})])],2)],1),e._v(" "),s("el-form-item",[s("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",loading:e.isBtnLoading},nativeOn:{click:function(t){return e.login(t)}}},[e._v(e._s(e.btnText))])],1)],1),e._v(" "),s("a",{staticClass:"reg",on:{click:e.toReg}},[e._v(" 跳转注册页面 ")])],1)},staticRenderFns:[]};var u=s("VU/8")(i,l,!1,function(e){s("EFCr")},"data-v-21363388",null);t.default=u.exports},vMJZ:function(e,t,s){"use strict";var n=s("mtWM"),o=s.n(n);s("byEY");o.a.defaults.baseURL="http://localhost:8080",o.a.defaults.headers.post["Content-Type"]="application/json",t.a={Login:function(e){return o.a.post("/login/login",e)},Reg:function(e){return o.a.post("/login/register",e)}}}});
//# sourceMappingURL=1.5252d1ba8250c0b8ec13.js.map