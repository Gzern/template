webpackJsonp([11],{McSm:function(e,t){},nTvh:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=r("Dd8w"),o=r.n(l),a=r("gyMJ"),m=r("NYxO"),u={name:"stock",data:function(){return{size:"medium",uploadUrl:"aaa",uploadForm:new FormData,ruleForm:{templateId:"",templateAmount:"",templateAreas:"",templateFactory:"",templateStore:"",templateMemo:""},rules:{templateId:[{validator:function(e,t,r){""===t&&r(new Error("This field is required")),a.IsIdExist.r(t).then(function(e){e.data?r():r(new Error("该样板不存在"))}).catch(function(e){console.log(e),r(new Error("网络错误"))})},trigger:"blur"}],templateAmount:[{validator:function(e,t,r){""===t?r(new Error("This field is required")):isNaN(t)?r(new Error("Please enter a number")):r()},trigger:"blur"}],templateAreas:[{required:!0,trigger:"blur"}],templateFactory:[{required:!0,trigger:"blur"}],templateStore:[{required:!0,trigger:"blur"}],templateMemo:[{required:!0,trigger:"blur"}]}}},methods:{handleRemove:function(e,t){},handlePreview:function(e){},uploadOverrun:function(){this.$message({type:"error",message:"上传文件个数超出限制!最多上传5张图片!"})},submitForm:function(e){var t=this;this.$refs[e].validate(function(r){if(!r)return console.log("error submit!!"),!1;var l=""!==t.factory?t.factory:t.ruleForm.templateFactory;t.uploadForm.append("templateId",t.ruleForm.templateId),t.uploadForm.append("templateAmount",t.ruleForm.templateAmount),t.uploadForm.append("templateAreas",t.ruleForm.templateAreas),t.uploadForm.append("templateFactory",l),t.uploadForm.append("templateStore",t.ruleForm.templateStore),t.uploadForm.append("templateMemo",t.ruleForm.templateMemo),console.log(t.uploadForm.getAll("images[]")),a.Stock.r(t.uploadForm).then(function(r){t.$message.success("成功添加库存！"),t.$refs[e].resetFields(),t.$router.push("/store")}),t.$refs.uploadPic.submit()})},resetForm:function(e){this.$refs[e].resetFields()},newFiles:function(e){return this.uploadForm.append("images[]",e),console.log(this.uploadForm.getAll("images[]")),!1}},computed:o()({},Object(m.c)(["auth","factory"])),created:function(){this.size=window.innerWidth<767?"mini":"medium"}},i={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"stock"},[r("div",{staticClass:"form-wrapper"},[r("el-form",{ref:"ruleForm",staticClass:"rule-form",attrs:{model:e.ruleForm,rules:e.rules,size:e.size,"label-width":"100px"}},[r("label",{staticClass:"title"},[e._v("数量信息")]),e._v(" "),r("el-form-item",{attrs:{label:"样板编号",prop:"templateId"}},[r("el-input",{model:{value:e.ruleForm.templateId,callback:function(t){e.$set(e.ruleForm,"templateId",t)},expression:"ruleForm.templateId"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"数量（片）",prop:"templateAmount"}},[r("el-input",{model:{value:e.ruleForm.templateAmount,callback:function(t){e.$set(e.ruleForm,"templateAmount",t)},expression:"ruleForm.templateAmount"}})],1),e._v(" "),r("hr"),e._v(" "),r("label",{staticClass:"title"},[e._v("存放地点信息")]),e._v(" "),r("el-form-item",{attrs:{label:"产区",prop:"templateAreas"}},[r("el-input",{model:{value:e.ruleForm.templateAreas,callback:function(t){e.$set(e.ruleForm,"templateAreas",t)},expression:"ruleForm.templateAreas"}})],1),e._v(" "),"factorier"!==e.auth?r("el-form-item",{attrs:{label:"分厂",prop:"templateFactory"}},[r("el-input",{model:{value:e.ruleForm.templateFactory,callback:function(t){e.$set(e.ruleForm,"templateFactory",t)},expression:"ruleForm.templateFactory"}})],1):e._e(),e._v(" "),r("el-form-item",{attrs:{label:"存放点（货架编号）",prop:"templateStore"}},[r("el-input",{model:{value:e.ruleForm.templateStore,callback:function(t){e.$set(e.ruleForm,"templateStore",t)},expression:"ruleForm.templateStore"}})],1),e._v(" "),r("hr"),e._v(" "),r("label",{staticClass:"title"},[e._v("图片信息")]),e._v(" "),r("el-upload",{ref:"uploadPic",staticClass:"upload",attrs:{action:e.uploadUrl,limit:5,"auto-upload":!1,"before-upload":e.newFiles,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"on-exceed":e.uploadOverrun,"list-type":"picture-card",multiple:""}},[r("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e._v(" "),r("div",{staticClass:"tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传最多5张照片，且不超过10M")])],1),e._v(" "),r("hr"),e._v(" "),r("label",{staticClass:"title"},[e._v("其他信息")]),e._v(" "),r("el-form-item",{attrs:{label:"备注",prop:"templateMemo"}},[r("el-input",{model:{value:e.ruleForm.templateMemo,callback:function(t){e.$set(e.ruleForm,"templateMemo",t)},expression:"ruleForm.templateMemo"}})],1)],1),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("提交")]),e._v(" "),r("el-button",{on:{click:function(t){e.resetForm("ruleForm")}}},[e._v("重置")])],1)])},staticRenderFns:[]};var s=r("VU/8")(u,i,!1,function(e){r("McSm")},"data-v-12390f00",null);t.default=s.exports}});
//# sourceMappingURL=11.a82e3be5204e1d75003a.js.map