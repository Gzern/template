webpackJsonp([12],{"+fGT":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("PJh5"),n=a.n(r),l=a("gyMJ"),i={mixins:[{data:function(){return{api:l}}}],name:"info",data:function(){return{currentPage:1,pageSize:10,infoDataLength:"",sizesmall:!1,size:"medium",infoData:[],searchForm:{templateId:""}}},methods:{search:function(){this.searchForm.templateId;this._getList(this.searchForm.templateId,1),this.currentPage=1},handleEdit:function(e,t){console.log(e,t)},handleDelete:function(e,t){var a=this;this.$confirm("确认删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info",center:!0}).then(function(){l.DeleteTemplate.r(t.templateId).then(function(e){"SUCCESS"===e.data&&(a.$message.success("数据删除成功"),a._getList(a.searchForm.templateId,a.currentPage))}).catch(function(e){a.$message.error("数据删除失败"),console.log(e)})}).catch(function(){})},enterAdd:function(){this.$router.push("/add")},handleCurrentChange:function(e){this.currentPage=e,this._getList(this.searchForm.templateId,e)},formatterColumn:function(e,t){var a=e[t.property];return void 0==a?"":n()(a).format("YYYY-MM-DD HH:mm:ss")},_getList:function(e,t){var a=this;l.List.r(e,t,10).then(function(r){200===r.status&&"SUCCESS"===r.data.success&&(a.infoData=r.data.data.templateInfoList,a.infoDataLength=parseInt(r.data.data.totalCount),a.$router.push("/info?currentPage="+t+"&search="+e))}).catch(function(e){console.log(e)})}},created:function(){this.sizesmall=window.innerWidth<767,this.size=window.innerWidth<767?"mini":"medium",this._getList(this.searchForm.templateId,1)},mounted:function(){if(window.innerWidth>=767){var e=this.$refs.tableWrapper.$el.clientHeight;this.tableHeight=e-50,console.log(this.tableHeight)}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"info"},[a("el-card",{staticClass:"search-wrapper"},[a("el-form",{ref:"searchForm",staticClass:"search-form",attrs:{model:e.searchForm,size:e.size,"label-width":"100px"}},[a("el-form-item",{staticClass:"search-form-item",attrs:{label:"样板编号",prop:"templateId"}},[a("el-input",{model:{value:e.searchForm.templateId,callback:function(t){e.$set(e.searchForm,"templateId",t)},expression:"searchForm.templateId"}})],1)],1),e._v(" "),a("div",{staticClass:"button-wrapper"},[a("el-button",{attrs:{size:e.size,type:"primary"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{size:e.size},on:{click:function(t){e.resetForm("searchForm")}}},[e._v("重置")]),e._v(" "),a("el-button",{directives:[{name:"has",rawName:"v-has",value:[e.api.Add],expression:"[api.Add]"}],attrs:{size:e.size,type:"primary"},on:{click:e.enterAdd}},[e._v("样板新增")])],1)],1),e._v(" "),a("el-card",{ref:"tableWrapper",staticClass:"table-wrapper"},[a("el-table",{ref:"tablePanel",staticClass:"table-panel",staticStyle:{width:"100%"},attrs:{data:e.infoData,size:e.size,height:e.tableHeight}},[a("el-table-column",{attrs:{prop:"templateId",label:"样板编号",fixed:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"templateSeries",label:"所属系列"}}),e._v(" "),a("el-table-column",{attrs:{prop:"templateNorm",label:"规格"}}),e._v(" "),a("el-table-column",{attrs:{prop:"piecesPerSuit",label:"每套片数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"templateType",width:"100",label:"类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"templateSignaturer",label:"签板人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"templateSignatureTime",width:"100",label:"签板日期",formatter:e.formatterColumn}}),e._v(" "),a("el-table-column",{attrs:{prop:"templateColor",label:"色号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"templateCtime",width:"100",label:"生产日期",formatter:e.formatterColumn}}),e._v(" "),a("el-table-column",{attrs:{width:"100",label:"操作",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"has",rawName:"v-has",value:[e.api.DeleteTemplate],expression:"[api.DeleteTemplate]"}],attrs:{size:"mini",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("样板报废")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,layout:"total, prev, pager, next",total:e.infoDataLength,small:e.sizesmall},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1)],1)},staticRenderFns:[]};var o=a("VU/8")(i,s,!1,function(e){a("G+od")},"data-v-0eb22993",null);t.default=o.exports},"G+od":function(e,t){}});
//# sourceMappingURL=12.3c4cacd220c48a4abf1c.js.map