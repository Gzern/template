{"version":3,"sources":["webpack:///./src/assets/js/util.js","webpack:///./src/router/fullpath.js","webpack:///src/App.vue","webpack:///./src/App.vue?b361","webpack:///./src/App.vue","webpack:///./src/router/index.js","webpack:///./src/store/actions.js","webpack:///./src/store/mutation-types.js","webpack:///./src/store/getters.js","webpack:///./src/store/state.js","webpack:///./src/store/mutations.js","webpack:///./src/store/index.js","webpack:///./src/main.js","webpack:///./src/api/instance.js"],"names":["__WEBPACK_IMPORTED_MODULE_2_vue__","component","__WEBPACK_IMPORTED_MODULE_3_element_ui__","name","handleSession","key","value","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_typeof___default","Array","isArray","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default","sessionStorage","setItem","IsVal","getItem","indexOf","JSON","parse","split","deepcopy","source","sourceCopy","item","fullpath","path","resolve","Promise","all","__webpack_require__","e","then","bind","module","children","myInterceptor","App","data","menuData","userData","methods","extends_default","Object","vuex_esm","getPermission","resources","resourcePermission","forEach","i","method","toLowerCase","url","setInterceptor","instance","interceptors","request","use","config","console","log","perName","replace","baseURL","warn","promise_default","a","reject","message","getRoutes","hashMenus","allowedRouter","this","$root","findLocalRoute","array","base","replyResult","route","pathKey","push","concat","util","extendRoutes","_this","actualRouter","map","beforeEnter","to","from","next","originPath","$router","addRoutes","redirect","signin","callback","_this2","localUser","Date","nowDate","expire","$message","error","logoutDirect","err","response","res","status","token","query","currentRoute","defaults","headers","common","get","params","_ref","getUserInfo","factory","roleInfo","roleFactory","userInfo","userFactory","storeUserInfo","username","userName","auth","roleName","setUserInfo","length","document","body","innerHTML","vue_runtime_esm","prototype","$_has","rArray","permission","p","catch","loginDirect","newPath","_this3","$nextTick","eject","created","selectortype_template_index_0_src_App","render","_h","$createElement","_c","_self","attrs","id","on","login","logout","staticRenderFns","src_App","normalizeComponent","ssrContext","vue_router_esm","baseRoute","router","routes","actions_setUserInfo","commit","state","actions_setConfig","_ref2","userId","role","isLogin","currentUser","getters_factory","currentStork","amount","currentConfig","store_state","maxAge","store_mutations","mutations","defineProperty_default","_mutations","store","Store","actions","actions_namespaceObject","getters","getters_namespaceObject","strict","plugins","element_ui_common_default","productionTip","directive","el","binding","parentNode","removeChild","h","__WEBPACK_IMPORTED_MODULE_0_axios___default","post","__webpack_exports__"],"mappings":"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","file":"static/js/app.fe5f0142abbeb70411bc.js","sourcesContent":["import Vue from 'vue'\nimport { Message } from 'element-ui'\nVue.component(Message.name, Message)\n\nexport const handleSession = function (key, value) {\n  if (!value) {\n    var IsVal = sessionStorage.getItem(key)\n    if (IsVal && IsVal.indexOf('autostringify-') === 0) {\n      return JSON.parse(IsVal.split('autostringify-')[1])\n    } else {\n      return IsVal\n    }\n  } else {\n    if (typeof(value) === 'object' || Array.isArray(value)) {\n      value = 'autostringify-' + JSON.stringify(value)\n    }\n    return sessionStorage.setItem(key, value)\n  }\n}\n\n//深拷贝\nexport const deepcopy = function (source) {\n  if (!source) {\n    return source;\n  }\n  let sourceCopy = source instanceof Array ? [] : {};\n  for (let item in source) {\n    sourceCopy[item] = typeof source[item] === 'object' ? deepcopy(source[item]) : source[item];\n  }\n  return sourceCopy;\n};\n\nexport const buildMenu = function (array, ckey) {\n  let menuData = [];\n  let indexKeys = Array.isArray(array) ? array.map((e) => {return e.id}) : [];\n  ckey = ckey || 'parent_id';\n  array.forEach(function (e, i) {\n    //一级菜单\n    // 如果没有上级菜单parent_id，就直接copy，并删除当前parent_id\n    if (!e[ckey] || (e[ckey]===e.id)) {\n      delete e[ckey];\n      menuData.push(deepcopy(e)); //深拷贝\n    }\n    // 如果有上级菜单parent_id，在id列表中，找到其parent_id是否存在，如果不存在，则直接push进去\n    else if(Array.isArray(indexKeys)){\n      //检测ckey有效性\n      let parentIndex = indexKeys.findIndex(function(id){\n        return id == e[ckey];\n      });\n      if(parentIndex===-1){\n        menuData.push(e);\n      }\n    }\n  });\n  // 到这为止，menuData里面全是一级路由\n  let findChildren = function (parentArr) {\n    if (Array.isArray(parentArr) && parentArr.length) {\n      parentArr.forEach(function (parentNode) {\n        array.forEach(function (node) {\n          if (parentNode.id === node[ckey]) {\n            if (parentNode.children) {\n              parentNode.children.push(node);\n            } else {\n              parentNode.children = [node];\n            }\n          }\n        });\n        if (parentNode.children) {\n          findChildren(parentNode.children);\n        }\n      });\n    }\n  };\n  findChildren(menuData);\n  return menuData;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/util.js","const Home = (resolve) => {\n  import('components/Home/Home').then((module) => {\n    resolve(module)\n  })\n}\n\nconst Add = (resolve) => {\n  import('components/Add/Add').then((module) => {\n    resolve(module)\n  })\n}\n\nconst Stock = (resolve) => {\n  import('components/Stock/Stock').then((module) => {\n    resolve(module)\n  })\n}\n\nconst Info = (resolve) => {\n  import('components/Info/Info').then((module) => {\n    resolve(module)\n  })\n}\n\nconst Store = (resolve) => {\n  import('components/Store/Store').then((module) => {\n    resolve(module)\n  })\n}\n\nconst Manager = (resolve) => {\n  import('components/Manager/Manager').then((module) => {\n    resolve(module)\n  })\n}\n\nconst Handle = (resolve) => {\n  import('components/Handle/Handle').then((module) => {\n    resolve(module)\n  })\n}\n\nconst Config = (resolve) => {\n  import('components/Config/Config').then((module) => {\n    resolve(module)\n  })\n}\n\nconst Login = (resolve) => {\n  import('components/Login/Login').then((module) => {\n    resolve(module)\n  })\n}\n\nconst Log = (resolve) => {\n  import('components/Log/Log').then((module) => {\n    resolve(module)\n  })\n}\n\nexport default [\n  {\n    path: '/',\n    name: 'Home',\n    component: Home,\n    children: [{\n      path: '/add',\n      name: 'Add',\n      component: Add\n    },{\n      path: '/stock',\n      name: 'Stock',\n      component: Stock\n    },{\n      path: '/info',\n      name: 'Info',\n      component: Info\n    },{\n      path: '/store',\n      name: 'Store',\n      component: Store\n    },{\n      path: '/manager',\n      name: 'Manager',\n      component: Manager\n    }, {\n      path: '/handle',\n      name: 'Handle',\n      component: Handle\n    }, {\n      path: '/config',\n      name: 'Config',\n      component: Config\n    }, {\n      path: '/log',\n      name: 'Log',\n      component: Log\n    }]\n  }\n]\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/fullpath.js","<template>\n  <div id=\"app\">\n    <keep-alive>\n      <router-view\n        @login=\"loginDirect\"\n        @logout=\"logoutDirect\"></router-view>\n    </keep-alive>\n  </div>\n</template>\n\n<script>\n  import Vue from 'vue'\n  import userPath from './router/fullpath'\n  import * as util from 'assets/js/util'\n  import instance from 'api/instance'\n  import { mapMutations, mapActions } from 'vuex'\n  import * as localUserInfo from 'assets/js/user'\n  \n  // 请求拦截句柄\n  let myInterceptor\n  \n  export default {\n    name: 'App',\n    data() {\n      return {\n        menuData: null,\n        userData: null\n      }\n    },\n    methods: {\n      ...mapActions([ 'setUserInfo' ]),\n      getPermission(resources) {\n        let resourcePermission = {}\n        if (Array.isArray(resources)) {\n          resources.forEach((e, i) => {\n            let key = e.method.toLowerCase() + ',' + e.url\n            resourcePermission[key] = true\n          })\n        }\n        return resourcePermission\n      },\n      setInterceptor: function(resourcePermission) {\n        // console.log(resourcePermission)\n        myInterceptor = instance.interceptors.request.use(function(config) {\n          console.log(config.url)\n          //得到请求路径\n          let perName = config.url.replace(config.baseURL, '').replace('/GET','').replace('/POST','').split('?')[0];\n          /*//权限格式1 /path/${param}\n          let reg1 = perName.match(/^(\\/[^\\/]+\\/)[^\\/]+$/);\n          if (reg1) {\n            perName = reg1[1] + '**';\n          }\n          //权限格式2 /path/${param}/path\n          let reg2 = perName.match(/^\\/[^\\/]+\\/([^\\/]+)\\/[^\\/]+$/);\n          if (reg2) {\n            perName = perName.replace(reg2[1], '*');\n          }*/\n          //校验权限\n          console.log(perName)\n          if (!resourcePermission[config.method + ',' + perName]) {\n            //调试信息\n            console.warn(resourcePermission, config.method + ',' + perName);\n            /*this.$message({\n              message: '无访问权限，请联系企业管理员',\n              type: 'warning'\n            });*/\n            //拦截请求\n            return Promise.reject({\n              message: 'no permission'\n            });\n          }\n          return config;\n        });\n      },\n      /*getRoutes(menus) {\n        if (!menus) {\n          return console.warn(menus)\n        }\n        let allowedRouter = []\n        // 将菜单数据转成多维数组格式\n        let arrayMenus = util.buildMenu(menus)\n        console.log('arrayMenus', arrayMenus)\n        // 将多维数组转成对象格式\n        let hashMenus = {}\n        let setMenu2Hash = function (array, base) {\n          array.map(key => {\n            if (key.route) {\n              let hashKey = ((base ? base + '/' : '') + key.route).replace(/^\\//, '')\n              hashMenus['/' + hashKey] = true\n              if (Array.isArray(key.children)) {\n                setMenu2Hash(key.children, key.route);\n              }\n            }\n          })\n        }\n        setMenu2Hash(arrayMenus)\n        //全局挂载hashMenus，用于实现路由守卫\n        this.$root.hashMenus = hashMenus;\n        console.log('hashMenus', hashMenus)\n        // 筛选本地路由方法\n        let findLocalRoute = function(array, base) {\n          let replyResult = [];\n          array.forEach(function(route) {\n            let pathKey = (base ? base + '/' : '') + route.path;\n            if (hashMenus[pathKey]) {\n              if (Array.isArray(route.children)) {\n                route.children = findLocalRoute(route.children, route.path);\n              }\n              replyResult.push(route);\n            }\n          });\n          if (base) {\n            return replyResult;\n          } else {\n            allowedRouter = allowedRouter.concat(replyResult);\n          }\n        }\n        let originPath = util.deepcopy(userPath[0].children);\n        findLocalRoute(originPath);\n        return allowedRouter;\n      },*/\n      \n      /* 重写 getRoutes 方法 */\n      getRoutes(hashMenus) {\n        if (!hashMenus) {\n          return console.warn(hashMenus)\n        }\n        let allowedRouter = []\n        // 将菜单数据转成多维数组格式\n        this.$root.hashMenus = hashMenus;\n        // 筛选本地路由方法\n        let findLocalRoute = function(array, base) {\n          let replyResult = [];\n          array.forEach(function(route) {\n            let pathKey = (base ? base + '/' : '') + route.path;\n            if (hashMenus[pathKey]) {\n              if (Array.isArray(route.children)) {\n                route.children = findLocalRoute(route.children, route.path);\n              }\n              replyResult.push(route);\n            }\n          });\n          if (base) {\n            return replyResult;\n          } else {\n            allowedRouter = allowedRouter.concat(replyResult);\n          }\n        }\n        let originPath = util.deepcopy(userPath[0].children);\n        findLocalRoute(originPath);\n        return allowedRouter;\n      },\n      \n      extendRoutes (allowedRouter) {\n        let actualRouter = util.deepcopy(allowedRouter)\n        actualRouter.map(e => {\n          return e.beforeEnter = (to, from, next) => {\n            if (this.$root.hashMenus[to.path]) {\n              next()\n            } else {\n              // 这里应该是401\n              next('/404')\n            }\n          }\n        })\n        // 也就是说 把实际的路由放到了原来的里面了\n        let originPath = util.deepcopy(userPath)\n        originPath[0].children = actualRouter\n        // console.log(originPath)\n        //注入路由\n        this.$router.addRoutes(originPath.concat([{\n          path: '*',\n          redirect: '/404'\n        }]));\n      },\n      \n      signin(callback) {\n        \n        \n        /*\n        /!* 本地静态 *!/\n        let rootInfo = userInfo.root\n        let factory = rootInfo.factory || ''\n        let storeUserInfo = {\n          username: rootInfo.name,\n          auth: rootInfo.id,\n          factory: factory\n        }\n        this.setUserInfo(storeUserInfo)\n        this.setInterceptor(rootInfo.resourcePermission)\n        let allowedRouter = this.getRoutes(rootInfo.hashMenus)\n        if (!allowedRouter || !allowedRouter.length) {\n          util.handleSession('token','');\n          return document.body.innerHTML = ('<h1>账号访问受限，请联系系统管理员！</h1>');\n        }\n        this.extendRoutes(allowedRouter)\n        this.menuData = allowedRouter\n        this.userData = rootInfo\n        Vue.prototype.$_has = function (rArray) {\n          let resources = []\n          let permission = true\n          if (Array.isArray(rArray)) {\n            rArray.forEach(e => {\n              resources = resources.concat(e.p)\n            })\n          } else {\n            resources = resources.concat(rArray.p)\n          }\n          resources.forEach(p => {\n            if (!rootInfo.resourcePermission[p]) {\n              return permission = false\n            }\n          })\n          return permission\n        }\n        typeof callback === 'function' && callback()\n        */\n        \n        \n        \n        // 获取用户信息及权限数据\n        \n        /* 服务器动态 */\n        \n        \n        // 检查登录状态\n        \n        let localUser = util.handleSession('token')\n        \n        // 设置时效\n        util.handleSession('expire', +new Date() + 10 * 60 * 1000)\n  \n        // http request 拦截器\n        instance.interceptors.request.use(\n          (config) => {\n            console.log(config)\n            let nowDate = +new Date()\n            let expire = util.handleSession('expire')\n            console.log('now', nowDate)\n            console.log('expire', expire)\n            if (expire < nowDate) {\n              this.$message.error('登录已过期')\n              this.logoutDirect()\n            }\n            return config\n          },\n          (err) => {\n            return Promise.reject(err)\n          }\n        )\n\n        // http response 拦截器\n        instance.interceptors.response.use(\n          (res) => {\n            return res\n          },\n          (err) => {\n            if (err.response) {\n              switch (err.response.status) {\n                case 401:\n                  this.$message.error('401')\n              }\n            }\n            return Promise.reject(err.response.data)\n          }\n        )\n        \n        console.log('localUser', localUser)\n        \n        if (!localUser || !localUser.token) {\n          console.log('未登录')\n          return this.$router.push({\n            path: '/login',\n            query: {\n              from: this.$router.currentRoute.path\n            }\n          })\n        }\n        instance.defaults.baseURL = 'http://localhost:8080'\n        // 设置请求头统一携带token\n        instance.defaults.headers.common['token'] = localUser.token\n        //获取用户信息及权限数据\n        instance.get('/login/sign', {\n          params: {\n            token: localUser.token\n          }\n        }).then(({ data }) => {\n          console.log(data)\n          let getUserInfo = data.data\n          let localUserAuth = {}\n          // 调试接口从本地获取\n          let factory = getUserInfo.roleInfo.roleFactory ? getUserInfo.userInfo.userFactory : ''\n          console.log(factory)\n          let storeUserInfo = {\n            username: getUserInfo.userInfo.userName,\n            auth: getUserInfo.roleName,\n            factory: factory\n          }\n          // console.log('store', storeUserInfo)\n          // 设置公共变量用户信息\n          this.setUserInfo(storeUserInfo)\n          \n         /*\n          // 根据 auth 判断本地权限，还没给服务器\n          // 这一部分需要给服务器\n          if (storeUserInfo.auth === 3) {\n            localUserAuth = localUserInfo.root\n          } else if (storeUserInfo.auth === 2) {\n            localUserAuth = localUserInfo.factory\n          } else {\n            localUserAuth = localUserInfo.user\n          }\n          */\n          /* 这里重写 */\n          //使用资源权限设置请求拦截\n          this.setInterceptor(getUserInfo.auth.resourcePermission)\n          //获得实际路由\n          let allowedRouter = this.getRoutes(getUserInfo.auth.hashMenus)\n          \n          /* 原来的权限 */\n          /* // 取得资源权限对象\n          let resourcePermission = this.getPermission(userInfo.resources)\n          console.log(resourcePermission)\n          //使用资源权限设置请求拦截\n          this.setInterceptor(resourcePermission)\n          \n          //获得实际路由\n          let allowedRouter = this.getRoutes(userInfo.menus);*/\n          \n          //若无可用路由限制访问\n          if (!allowedRouter || !allowedRouter.length) {\n            util.handleSession('token','');\n            return document.body.innerHTML = ('<h1>账号访问受限，请联系系统管理员！</h1>');\n          }\n          \n          // 重点来了：动态注入路由\n          this.extendRoutes(allowedRouter)\n          \n          // 保存数据，这个后面再说\n          this.menuData = allowedRouter\n          this.userData = getUserInfo\n          \n          // 权限检验方法\n          Vue.prototype.$_has = function (rArray) {\n            let resources = []\n            let permission = true\n            // 提取权限数组\n            // 这边就是有个数组可以限制多重权限？\n            if (Array.isArray(rArray)) {\n              rArray.forEach(e => {\n                resources = resources.concat(e.p)\n              })\n            } else {\n              resources = resources.concat(rArray.p)\n            }\n            // 校验权限\n            resources.forEach(p => {\n              if (!getUserInfo.auth.resourcePermission[p]) {\n                return permission = false\n              }\n            })\n            return permission\n          }\n          // 执行回调\n          typeof callback === 'function' && callback()\n        }).catch((err) => {\n          console.log(err)\n        })\n      },\n      loginDirect(newPath) {\n        this.signin(() => {\n          // console.log('?')\n          this.$nextTick(() => {\n            this.$router.replace({ path: newPath || '/' })\n          })\n        })\n      },\n      logoutDirect() {\n        // 清除session\n        util.handleSession('token', '')\n        util.handleSession('expire', '')\n        // 清除用户名\n        this.setUserInfo({\n          username: '',\n          auth: '',\n          factory: ''\n        })\n        // 清除请求权限控制\n        instance.interceptors.request.eject(myInterceptor)\n        // 清楚菜单权限\n        this.$root.hashMenus = {}\n        // 清除请求头token\n        instance.defaults.headers.common['token'] = ''\n        // 回到登录页\n        this.$router.replace({ path: '/login' })\n      }\n    },\n    created() {\n      this.signin()\n      \n    }\n  }\n</script>\n\n<style>\n#app {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  width: 100%;\n  height: 100%;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('keep-alive',[_c('router-view',{on:{\"login\":_vm.loginDirect,\"logout\":_vm.logoutDirect}})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-c6b617f6\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-c6b617f6\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-c6b617f6\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","import Vue from 'vue'\nimport Router from 'vue-router'\n\nVue.use(Router)\n\nconst Login = (resolve) => {\n  import('components/Login/Login').then((module) => {\n    resolve(module)\n  })\n}\n\nconst Reg = (resolve) => {\n  import('components/Reg/Reg').then((module) => {\n    resolve(module)\n  })\n}\n\nconst Error404 = (resolve) => {\n  import('components/Error/404').then((module) => {\n    resolve(module)\n  })\n}\n\nlet baseRoute = [\n  {\n    path: '/login',\n    name: 'Login',\n    component: Login\n  }, {\n    path: '/reg',\n    name: 'Reg',\n    component: Reg\n  }, {\n    path: '/404',\n    name: 'Not Found',\n    component: Error404\n  }\n]\n\nexport default new Router({\n  routes: baseRoute\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","import * as types from './mutation-types'\n\nexport const setUserInfo = function ({ commit, state }, userInfo) {\n  console.log(userInfo)\n  commit(types.SET_USERNAME, userInfo.username)\n  commit(types.SET_AUTH, userInfo.auth)\n  if (userInfo.auth === 'factorier' && userInfo.factory) {\n    commit(types.SET_FACTORY, userInfo.factory)\n  }\n}\n\nexport const setConfig = function ({ commit, state }, config) {\n  commit(types.SET_CONFIG_USERNAME, config.username)\n  commit(types.SET_CONFIG_USERID, config.userId)\n  commit(types.SET_CONFIG_ROLE, config.role)\n  commit(types.SET_CONFIG_FACTORY, config.factory)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/actions.js","export const SET_USERNAME = 'SET_USERNAME'\n\nexport const SET_AUTH = 'SET_AUTH'\n\nexport const SET_FACTORY = 'SET_FACTORY'\n\nexport const SET_TEMPLATE_ID = 'SET_TEMPLATE_ID'\n\nexport const SET_TEMPLATE_AMOUNT = 'SET_TEMPLATE_AMOUNT'\n\nexport const SET_CONFIG_USERNAME = 'SET_CONFIG_USERNAME'\n\nexport const SET_CONFIG_USERID = 'SET_CONFIG_USERID'\n\nexport const SET_CONFIG_ROLE = 'SET_CONFIG_ROLE'\n\nexport const SET_CONFIG_FACTORY = 'SET_CONFIG_FACTORY'\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/mutation-types.js","export const isLogin = state => state.isLogin\n\nexport const username = state => state.currentUser.username\n\nexport const auth = state => state.currentUser.auth\n\nexport const factory = state => state.currentUser.factory\n\nexport const id = state => state.currentStork.id\n\nexport const amount = state => state.currentStork.amount\n\nexport const currentConfig = state => state.currentConfig\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/getters.js","const state = {\n  // 用户信息\n  currentUser: {\n    username: '',\n    auth: '',\n    factory: ''\n  },\n  currentStork: {\n    id: '',\n    amount: ''\n  },\n  currentConfig: {\n    username: '',\n    userId: '',\n    role: '',\n    factory: ''\n  },\n  maxAge: 24*60*60*100,\n  isLogin: false\n}\n\nexport default state\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/state.js","import * as types from './mutation-types'\n\nconst mutations = {\n  [types.SET_USERNAME](state, username) {\n    state.currentUser.username = username\n  },\n  [types.SET_AUTH](state, auth) {\n    state.currentUser.auth = auth\n  },\n  [types.SET_FACTORY](state, factory) {\n    state.currentUser.factory = factory\n  },\n  [types.SET_TEMPLATE_ID](state, id) {\n    state.currentStork.id = id\n  },\n  [types.SET_TEMPLATE_AMOUNT](state, amount) {\n    state.currentStork.amount = amount\n  },\n  [types.SET_CONFIG_USERNAME](state, username) {\n    state.currentConfig.username = username\n  },\n  [types.SET_CONFIG_USERID](state, userId) {\n    state.currentConfig.userId = userId\n  },\n  [types.SET_CONFIG_ROLE](state, role) {\n    state.currentConfig.role = role\n  },\n  [types.SET_CONFIG_FACTORY](state, factory) {\n    state.currentConfig.factory = factory\n  },\n}\nexport default mutations\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/mutations.js","import Vue from 'vue'\nimport Vuex from 'vuex'\nimport * as actions from './actions'\nimport * as getters from './getters'\nimport state from './state'\nimport mutations from './mutations'\nimport createLogger from 'vuex/dist/logger'\n\nVue.use(Vuex)\n\nconst debug = process.env.NODE_ENV !== 'production'\n\nexport default new Vuex.Store({\n  actions,\n  getters,\n  state,\n  mutations,\n  strict: debug,\n  plugins: debug ? [createLogger()] : []\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/index.js","import Vue from 'vue'\nimport App from './App'\nimport router from './router'\nimport ElementUI from 'element-ui';\nimport 'assets/stylus/index.styl'\nimport 'element-ui/lib/theme-chalk/index.css';\nimport store from './store'\n\nVue.use(ElementUI)\n\nVue.config.productionTip = false\n\n// 权限指令\nVue.directive('has', {\n  bind: function (el, binding) {\n    if (!Vue.prototype.$_has(binding.value)) {\n      el.parentNode.removeChild(el)\n    }\n  }\n})\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  router,\n  store,\n  render: h => h(App)\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","import axios from 'axios'\nimport * as util from '../assets/js/util'\n\n// axios.defaults.baseURL = 'http://10.108.171.4'\naxios.defaults.headers.post['Content-Type'] = 'application/json'\n\n\nexport default axios\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/instance.js"],"sourceRoot":""}